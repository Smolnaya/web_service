{% extends 'base.html' %}

{% load static %}

{% load bootstrap_pagination %}

{% block javascript %}
    <script src="{% static 'articles/js/articles.js' %}"></script>
{% endblock %}

{% block content %}
<form method="GET" class="form-inline">
{#{% csrf_token %}#}

    <div class="page-header">
{#        <form method="GET" class="form-inline">#}
{#            {% csrf_token %}#}

            {#        SEARCH       #}
            <div class="input-field form-group">
                <label>
                    <input type="text" class="form-control" name="q" value="{{ request.GET.q }}"
                           placeholder="Поиск по заголовку">
                </label>
                <button class="btn btn-info glyphicon glyphicon-search" type="submit" name="action"></button>
            </div>

            {#        SORT      #}
            <div class="form-check">
              <input class="form-check-input" type="radio"
                     name="publication_date" id="flexRadioDefault1">
              <label class="form-check-label" for="flexRadioDefault1">
                По дате
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" value="{{ request.GET.s }}"
                     name="author" id="flexRadioDefault2" checked>
              <label class="form-check-label" for="flexRadioDefault2">
                По автору
              </label>
            </div>

            {#        FILTER        #}
            <div class="input-field form-group">
            </div>

{#        </form>#}
    </div>

    <p>
        <button type="button" class="btn btn-primary js-create-article"
                data-url="{% url 'article_create' %}">
            <span class="glyphicon glyphicon-plus"></span>
            Новая статья
        </button>
    </p>

    <table class="table" id="article-table">
        <thead>
        <tr>
            <th>#          </th>
            <th>Заголовок  </th>
            <th>Автор      </th>
            <th>Дата       </th>
            <th>Источник   </th>
            <th>Теги       </th>
            <th></th>
        </tr>
        </thead>
        <tbody>
        {% include 'articles/includes/partial_article_list.html' %}
        </tbody>
    </table>

</form>

    {#        {% bootstrap_paginate articles range=10 show_prev_next="true" show_first_last="true" %}#}

    {% if articles.has_other_pages %}
        <div class="pagination" style="font-size: 16px;">
            {% if articles.has_previous %}
                <a href="?page=
                        {{ articles.previous_page_number }}
                {% if request.GET.q%}&q={{ request.GET.q }}{% endif %}
                {% if request.GET.s%}&s={{ request.GET.s }}{% endif %}
                "><span class="glyphicon glyphicon-chevron-left" style="font-size: 20px;"></span></a>
            {% endif %}
            Страница {{ articles.number }} из {{ articles.paginator.num_pages }}
            {% if articles.has_next %}
                <a href="?page={{ articles.next_page_number }}
                {% if request.GET.q %}&q={{ request.GET.q }}{% endif %}
                {% if request.GET.s%}&s={{ request.GET.s }}{% endif %}
                "><span class="glyphicon glyphicon-chevron-right" style="font-size: 20px;"></span></a>
            {% endif %}
        </div>
    {% endif %}

    <div class="modal fade" id="modal-article">
        <div class="modal-dialog">
            <div class="modal-content">

            </div>
        </div>
    </div>
{% endblock %}